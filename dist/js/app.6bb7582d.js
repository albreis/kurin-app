(function(e){function t(t){for(var o,r,i=t[0],c=t[1],l=t[2],d=0,p=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(a,r)&&a[r]&&p.push(a[r][0]),a[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);u&&u(t);while(p.length)p.shift()();return s.push.apply(s,l||[]),n()}function n(){for(var e,t=0;t<s.length;t++){for(var n=s[t],o=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(o=!1)}o&&(s.splice(t--,1),e=r(r.s=n[0]))}return e}var o={},a={app:0},s=[];function r(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=o,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var u=c;s.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"082b":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("d3b7"),n("96cf");var o=n("1da1"),a=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[e._m(0),n("router-view")],1)},r=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("h1",[e._v("Kurin")]),n("p",[e._v("a simple plan, for simple peoples")])])}],i={},c=i,l=(n("7faf"),n("2877")),u=Object(l["a"])(c,s,r,!1,null,null,null),d=u.exports,p=n("8c4f"),f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("div",{staticClass:"projects"},[n("label",{staticClass:"add-project"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newProject,expression:"newProject"}],attrs:{type:"text",placeholder:"Create project"},domProps:{value:e.newProject},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addProject(t)},input:function(t){t.target.composing||(e.newProject=t.target.value)}}})]),n("transition-group",{attrs:{tag:"ul",name:"slide-fade"}},e._l(e.projects,(function(t,o){return n("li",{key:t.id,staticClass:"project",attrs:{index:o}},[n("div",{staticClass:"project-name"},[n("div",{staticClass:"left"},[n("span",{on:{click:function(n){return e.openProject(t)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"project.name"}],attrs:{type:"text",readonly:"readonly"},domProps:{value:t.name},on:{input:function(n){n.target.composing||e.$set(t,"name",n.target.value)}}})]),n("small",[e._v("("+e._s(t.done_tasks)+" / "+e._s(t.open_tasks)+")")])]),n("div",{staticClass:"center"}),n("div",{staticClass:"right"},[n("button",{attrs:{type:"button"},on:{click:function(n){return e.deleteProject(t)}}},[e._v("remover")])])]),e.project_open==t?n("div",{staticClass:"tasks"},[n("label",{staticClass:"add-task"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.newTask,expression:"newTask"}],attrs:{type:"text",placeholder:"Create task"},domProps:{value:e.newTask},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addTask(e.project_open.id)},input:function(t){t.target.composing||(e.newTask=t.target.value)}}})]),n("transition-group",{attrs:{tag:"ul",name:"slide-fade"}},e._l(e.tasks,(function(o,a){return n("li",{key:o.id,staticClass:"task",attrs:{index:a,"data-done":"0000-00-00 00:00:00"!=o.done_at}},[n("div",{staticClass:"left"},[n("div",{staticClass:"task-name"},[n("label",[n("input",{attrs:{type:"checkbox"},domProps:{checked:"0000-00-00 00:00:00"!=o.done_at},on:{change:function(n){return e.doneTask(t,o)}}})]),n("input",{directives:[{name:"model",rawName:"v-model",value:o.name,expression:"task.name"}],attrs:{type:"text",readonly:"readonly"},domProps:{value:o.name},on:{input:function(t){t.target.composing||e.$set(o,"name",t.target.value)}}})])]),n("div",{staticClass:"center"}),n("div",{staticClass:"right"},[n("button",{attrs:{type:"button"},on:{click:function(n){return e.deleteTask(t,o)}}},[e._v("remover")])])])})),0)],1):e._e()])})),0)],1)])},m=[],h=(n("99af"),{name:"Home",data:function(){return{project_open:null,newTask:null,newProject:null,projects:[],tasks:[]}},mounted:function(){if(!sessionStorage.token)return this.$router.push("/login"),!1;this.getProjects()},methods:{openProject:function(e){this.tasks=[],this.project_open=this.project_open==e?null:e,this.project_open&&this.getTasks(e.id)},getProjects:function(){var e=this;this.axios.get("projects").then((function(t){console.log(t.data),e.projects=t.data})).catch((function(e){console.log(e)}))},getTasks:function(e){var t=this;this.axios.get("projects/".concat(e,"/tasks")).then((function(e){console.log(e.data),t.tasks=e.data})).catch((function(e){console.log(e)}))},addTask:function(e){var t=this;this.axios.post("projects/".concat(e,"/tasks"),{name:this.newTask}).then((function(n){console.log(n.data),t.newTask=null,t.getTasks(e)})).catch((function(e){console.log(e)}))},addProject:function(){var e=this;this.axios.post("projects",{name:this.newProject}).then((function(t){console.log(t.data),e.newProject=null,e.getProjects()})).catch((function(e){console.log(e)}))},doneTask:function(e,t){var n="0000-00-00 00:00:00"==t.done_at?"done":"undone";this.axios.post("projects/".concat(e.id,"/tasks/").concat(t.id,"/").concat(n)).then((function(e){console.log(e.data),t.done_at="0000-00-00 00:00:00"==t.done_at?new Date:"0000-00-00 00:00:00"})).catch((function(e){console.log(e)}))},deleteTask:function(e,t){var n=this;this.axios.delete("projects/".concat(e.id,"/tasks/").concat(t.id)).then((function(t){console.log(t.data),n.getTasks(e.id)})).catch((function(e){console.log(e)}))},deleteProject:function(e){var t=this;this.axios.delete("projects/".concat(e.id)).then((function(n){console.log(n.data),t.getProjects(e.id)})).catch((function(e){console.log(e)}))}}}),v=h,g=(n("d471"),Object(l["a"])(v,f,m,!1,null,"30bfccf4",null)),w=g.exports,k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login"},[n("form",{on:{submit:function(t){return e.login(t)}}},[n("h1",[e._v("Login / Register")]),e.newuser?n("p",[e._v("You don't have an account. Please create a password before login.")]):e._e(),e.checked?e._e():n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],attrs:{required:"",type:"email",placeholder:"Your e-mail"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e.checked?n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],attrs:{required:"",type:"password",placeholder:"Your password"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}):e._e(),e.newuser?n("input",{directives:[{name:"model",rawName:"v-model",value:e.confirm_password,expression:"confirm_password"}],attrs:{required:"",type:"password",placeholder:"Repeat your password"},domProps:{value:e.confirm_password},on:{input:function(t){t.target.composing||(e.confirm_password=t.target.value)}}}):e._e(),e.password_error?n("p",{staticClass:"error"},[e._v("Password not match")]):e._e(),n("button",{attrs:{type:"submit"}},[e._v("NEXT")]),n("br"),e.checked?n("small",{on:{click:e.back}},[e._v("back")]):e._e()])])},_=[],j={data:function(){return{email:"",password:"",confirm_password:"",checked:!1,newuser:!1,password_error:!1}},methods:{back:function(){this.checked=!1,this.newuser=!1},login:function(e){var t=this;if(e.preventDefault(),this.checked){if(this.newuser&&this.password!=this.confirm_password)return this.password_error=!0,!1;this.axios.post("login",{email:this.email,password:this.password,confirm_password:this.confirm_password}).then((function(e){console.log(e.data),e.data&&32==e.data.length&&(sessionStorage.token=e.data,t.$router.push("/"))})).catch((function(e){console.log(e)}))}else this.axios.post("login/verify",{email:this.email}).then((function(e){console.log(e.data),t.newuser=0==e.data,t.checked=!0})).catch((function(e){console.log(e)}))}}},b=j,y=(n("d420"),Object(l["a"])(b,k,_,!1,null,"e2c41186",null)),x=y.exports;a["a"].use(p["a"]);var P=[{path:"/",name:"Home",component:w},{path:"/login",name:"Login",component:x}],T=new p["a"]({mode:"hash",base:"/",routes:P}),C=T,O=n("bc3a"),$=n.n(O),N=$.a.create({baseURL:"https://kurin.albreis.com.br/api/",headers:{Accept:"application/json","Content-Type":"application/json"}});N.interceptors.request.use(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.headers["X-User-Token"]=sessionStorage.token,e.abrupt("return",t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),(function(e){return Promise.reject(e)})),a["a"].prototype.axios=N,a["a"].config.productionTip=!1,new a["a"]({router:C,render:function(e){return e(d)}}).$mount("#app")},"7faf":function(e,t,n){"use strict";var o=n("b8ff"),a=n.n(o);a.a},b8ff:function(e,t,n){},c297:function(e,t,n){},d420:function(e,t,n){"use strict";var o=n("082b"),a=n.n(o);a.a},d471:function(e,t,n){"use strict";var o=n("c297"),a=n.n(o);a.a}});
//# sourceMappingURL=app.6bb7582d.js.map